# ComfyUI Flyway 插件

一个专用的 ComfyUI 插件，包含图片目录操作和多行文本输入等功能。

## 节点列表

### 🐦‍🔥 Image List ↔ Directory

功能：双向处理图片列表与目录（自动双模式）

#### 功能特点
- **自动双模式**：根据输入自动判断是保存还是读取
- **图片输入**：接收图片批次并保存到目录
- **目录读取**：从目录读取图片序列
- **路径设置**：支持全局绝对路径，如果路径不存在会自动创建
- **文件前缀**：设置保存的图片文件前缀
- **清空目录**：可选择在保存前清空目录
- **序列追加**：若目录已有图片，则从末尾继续编号
- **跳过/限制**：支持跳过数量和最大数量限制

#### 参数说明
- `path`: 保存或读取的路径
- `clear_directory`: 是否在保存前清空目录
- `filename_prefix`: 文件名前缀
- `skip_count`: 跳过的图片数量
- `max_count`: 最大加载数量（0表示无限制）
- `images`: （可选）输入的图片批次

#### 返回值
- `images`: 处理后的图片列表
- `path`: 目录路径
- `count`: 处理的图片数量

### 🐦‍🔥 多行文本轮询（顺序/随机）

功能：处理多行文本，支持多种输出模式。

#### 功能特点
- **多行处理**：处理多行文本，忽略空行
- **顺序模式**：每次执行自动跳到下一行，末尾后回到开头
- **随机模式**：每次执行随机洗牌一行，全部洗完后重新洗牌
- **索引模式**：根据输入的 line_index 固定取行
- **状态缓存**：使用哈希缓存跨执行存储当前进度
- **强制更新**：通过 IS_CHANGED 机制确保每次执行都更新

#### 参数说明
- `text`: 多行文本输入
- `output_mode`: 输出模式（sequential=顺序, random=随机, index=按索引）
- `line_index`: 当模式为索引时，指定输出第几行

#### 返回值
- `full_text`: 完整的原始文本
- `line_text`: 输出的单行文本
- `line_count`: 非空行的总数

## 安装方法

1. 将此文件夹复制到 ComfyUI 的 `custom_nodes` 目录下
2. 重启 ComfyUI

## 使用示例

在 ComfyUI 中，您可以在 "flyway" 类别中找到这些节点。

## 注意事项

- 请确保设置的路径有足够的写入权限
- 清空目录功能会删除目录中的所有支持格式的图片文件
- 多行文本节点会自动忽略空行
- 顺序和随机模式会跨执行保持状态
- Image List ↔ Directory 节点根据是否有输入图片自动切换保存/读取模式